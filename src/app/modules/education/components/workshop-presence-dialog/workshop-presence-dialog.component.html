<app-dialog contentClass="sm:max-w-[500px]">
  <app-dialog-header>
    <app-dialog-title>Gerenciar Presenças</app-dialog-title>
    <app-dialog-description>
      Marque os alunos presentes na sessão: {{ data.session.description }}
    </app-dialog-description>
  </app-dialog-header>

  <form [formGroup]="presenceForm" (ngSubmit)="onSubmit()" class="mt-4">
    <div class="max-h-[300px] overflow-y-auto border rounded-md divide-y">
      @for (student of data.enrolledStudents; track student.studentId; let i = $index) {
        <div class="flex items-center justify-between p-3 hover:bg-gray-50">
          <label [for]="'student-' + i" class="flex-1 cursor-pointer text-sm text-gray-900">
            {{ student.studentName }} (ID: {{ student.studentId }})
          </label>
          <input
            [id]="'student-' + i"
            type="checkbox"
            [formControl]="$any(studentsArray.at(i))"
            class="app-checkbox"
          />
        </div>
      } @empty {
        <p class="text-sm text-gray-500 italic text-center py-4">Nenhum aluno matriculado nesta oficina.</p>
      }
    </div>

    <div class="flex justify-end gap-3 pt-4 mt-4 border-t">
      <button appButton type="button" variant="outline" (click)="cancel()">Cancelar</button>
      <button appButton type="submit">Salvar Presenças</button>
    </div>
  </form>
</app-dialog>
